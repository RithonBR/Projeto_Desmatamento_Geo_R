---
title: "üß© Cria√ß√£o e Documenta√ß√£o de Fun√ß√µes Personalizadas no R"
output: html_notebook
---

As fun√ß√µes s√£o fundamentais para tornar o c√≥digo modular, organizado e leg√≠vel. Mas al√©m de cri√°-las, √© importante documentar e seguir boas pr√°ticas ‚Äî principalmente se voc√™ planeja criar pacotes ou scripts grandes.

---------------------------

**1Ô∏è‚É£ Estrutura Completa de uma Fun√ß√£o**
```{r}
nome_funcao <- function(arg1, arg2 = valor_padrao, ...) {
  # Coment√°rio explicando o que a fun√ß√£o faz
  
  # Passo 1: (processamento)
  # Passo 2: (c√°lculo ou an√°lise)
  
  resultado <- algo
  
  return(resultado)
}
```
**üî∂ Exemplo pr√°tico**
```{r}
# Calcula m√©dia e desvio padr√£o de um vetor num√©rico
estatisticas <- function(x) {
  media <- mean(x)
  desvio <- sd(x)
  return(list(media = media, desvio = desvio))
}

valores <- c(10, 15, 20, 25)
estatisticas(valores)
```
üí° Sempre que poss√≠vel, retorne listas nomeadas, para facilitar o acesso aos resultados.

------------------------------

**2Ô∏è‚É£ Coment√°rios e clareza do c√≥digo**

Coment√°rios (#) tornam o c√≥digo mais leg√≠vel.

Eles explicam o prop√≥sito, a l√≥gica e os par√¢metros da fun√ß√£o.

```{r}
# Fun√ß√£o que calcula o √≠ndice NDVI (vegeta√ß√£o)
calcular_ndvi <- function(banda_nir, banda_red) {
  # F√≥rmula: NDVI = (NIR - RED) / (NIR + RED)
  ndvi <- (banda_nir - banda_red) / (banda_nir + banda_red)
  return(ndvi)
}
```
üí¨ Coment√°rios curtos e claros ajudam quem for ler seu c√≥digo depois ‚Äî inclusive voc√™ mesmo.

------------------------------

**3Ô∏è‚É£ Adicionando documenta√ß√£o estilo ‚Äúhelp‚Äù**

Voc√™ pode criar uma documenta√ß√£o embutida, parecida com o ?mean do R.

Usa-se o padr√£o roxygen2 (mesmo que voc√™ n√£o esteja criando pacotes).

```{r}
#' Calcula a m√©dia e o desvio padr√£o de um vetor num√©rico
#'
#' Esta fun√ß√£o recebe um vetor num√©rico e retorna a m√©dia e o desvio padr√£o.
#'
#' @param x Vetor num√©rico de entrada.
#' @return Uma lista contendo:
#' \item{media}{A m√©dia dos valores}
#' \item{desvio}{O desvio padr√£o dos valores}
#' @examples
#' estatisticas(c(1, 2, 3, 4, 5))
estatisticas <- function(x) {
  media <- mean(x)
  desvio <- sd(x)
  return(list(media = media, desvio = desvio))
}
```
üí° Isso √© essencial se voc√™ quiser criar pacotes no R, pois a documenta√ß√£o ser√° exibida com ?estatisticas.

------------------------------

**4Ô∏è‚É£ Boas pr√°ticas na cria√ß√£o de fun√ß√µes**
| Boas pr√°ticas                  | Explica√ß√£o                                             |
| ------------------------------ | ------------------------------------------------------ |
| ‚úÖ **Nomes descritivos**        | Use verbos claros: `calcular_media()`, `gerar_mapa()`. |
| ‚úÖ **Argumentos nomeados**      | Evite depender da ordem dos par√¢metros.                |
| ‚úÖ **Retornar objetos simples** | Vetor, data frame ou lista com nomes.                  |
| ‚úÖ **Verifica√ß√£o de erros**     | Use `stop()` e `warning()` para alertar problemas.     |
| ‚úÖ **Coment√°rios curtos**       | Explique blocos de c√≥digo, n√£o cada linha.             |
| ‚úÖ **Evite vari√°veis globais**  | Use apenas vari√°veis locais dentro da fun√ß√£o.          |

------------------------------

**5Ô∏è‚É£ Lidando com erros e avisos**

Fun√ß√µes bem feitas verificam se as entradas s√£o v√°lidas antes de continuar.

```{r}
# Fun√ß√£o com verifica√ß√£o de erro
calcular_media_segura <- function(x) {
  if (!is.numeric(x)) {
    stop("Erro: o argumento deve ser num√©rico.")
  }
  return(mean(x))
}

calcular_media_segura(c(10, 20, 30))   # funciona
calcular_media_segura("texto")         # gera erro amig√°vel
```
üí° stop() interrompe a execu√ß√£o com mensagem de erro; warning() apenas avisa o usu√°rio e continua.

------------------------------

**6Ô∏è‚É£ Fun√ß√µes com argumentos flex√≠veis (...)**

O operador "..." permite passar argumentos extras para outras fun√ß√µes.
```{r}
# Fun√ß√£o que faz gr√°ficos personalizados
meu_plot <- function(x, y, ...) {
  plot(x, y, col = "blue", pch = 19, ...)
}

# Adicionando novos argumentos sem alterar a fun√ß√£o
meu_plot(1:5, c(3,1,4,2,5), main = "Meu gr√°fico", xlab = "Eixo X", ylab = "Eixo Y")
```
üí° Isso √© √≥timo para fun√ß√µes gen√©ricas e reutiliz√°veis.

------------------------------

**7Ô∏è‚É£ Fun√ß√µes dentro de pacotes**

Se voc√™ for evoluir para a cria√ß√£o de pacotes no R, cada fun√ß√£o deve:

**Ter documenta√ß√£o roxygen2**

**Ficar em um arquivo .R separado**

**Ter exemplos de uso**

**Ter testes autom√°ticos (testthat)**


